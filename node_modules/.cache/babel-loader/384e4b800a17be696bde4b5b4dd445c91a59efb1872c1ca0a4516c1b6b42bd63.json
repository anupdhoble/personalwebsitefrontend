{"ast":null,"code":"import _regeneratorRuntime from\"D:/GithubRepo/personalwebsite/Frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/GithubRepo/personalwebsite/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/GithubRepo/personalwebsite/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import BlogController from\"./BlogController\";import{addDoc,collection,serverTimestamp}from'firebase/firestore';import{auth,db}from'../firebaseConfig';import{useNavigate}from\"react-router-dom\";import'../styles/bloglogin.css';import'react-toastify/dist/ReactToastify.css';import{ToastContainer,toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CreateBlog(_ref){var isLogin=_ref.isLogin;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),blogContent=_useState4[0],setBlogContent=_useState4[1];var postsCollectionRef=collection(db,\"blogs\");var navigate=useNavigate();var createPost=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var ipAddressResponse,ipAddressData,ipAddress,userAgent,currentDate,formatDate;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(title!==\"\"&&blogContent!==\"\")){_context.next=28;break;}_context.prev=1;_context.next=4;return fetch('https://api.ipify.org?format=json');case 4:ipAddressResponse=_context.sent;_context.next=7;return ipAddressResponse.json();case 7:ipAddressData=_context.sent;ipAddress=ipAddressData.ip;// Get device information\nuserAgent=window.navigator.userAgent;currentDate=new Date();formatDate=\"\".concat(currentDate.getDate(),\"/\").concat(currentDate.getMonth()+1,\"/\").concat(currentDate.getFullYear());_context.next=14;return addDoc(postsCollectionRef,{title:title,blogContent:blogContent,uploadDate:formatDate,uploadTime:serverTimestamp(),author:{name:auth.currentUser.displayName,id:auth.currentUser.uid},ipAddress:ipAddress,userAgent:userAgent});case 14:// Show a success message to the user\ntoast.success(\"Post created successfully\");setTitle(\"\");setBlogContent(\"\");// Navigate after success\nnavigate('/blogs');_context.next=26;break;case 20:_context.prev=20;_context.t0=_context[\"catch\"](1);setTitle(\"\");setBlogContent(\"\");console.error(\"Error creating post:\",_context.t0);toast.error(\"An error occurred while creating post\");case 26:_context.next=29;break;case 28:toast.error(\"Title or Content can't be empty\");case 29:case\"end\":return _context.stop();}},_callee,null,[[1,20]]);}));return function createPost(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(!isLogin){navigate(\"/blogs/login\");toast.warning(\"Login to create Blog\");}});return/*#__PURE__*/_jsxs(\"div\",{className:\"footer-fix\",children:[/*#__PURE__*/_jsx(ToastContainer,{position:\"top-right\",autoClose:3000,hideProgressBar:false}),/*#__PURE__*/_jsx(BlogController,{isLogin:isLogin}),/*#__PURE__*/_jsx(\"div\",{className:\"createPostPage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cpContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Create a Blog\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputGp\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Article Title:\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Title..\",value:title,onChange:function onChange(event){setTitle(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputGp\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Content:\"}),/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Start writing...\",value:blogContent,id:\"\",cols:\"30\",rows:\"10\",onChange:function onChange(event){setBlogContent(event.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{onClick:createPost,children:\"Submit\"})]})})]});};","map":{"version":3,"names":["useEffect","useState","BlogController","addDoc","collection","serverTimestamp","auth","db","useNavigate","ToastContainer","toast","jsx","_jsx","jsxs","_jsxs","CreateBlog","_ref","isLogin","_useState","_useState2","_slicedToArray","title","setTitle","_useState3","_useState4","blogContent","setBlogContent","postsCollectionRef","navigate","createPost","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ipAddressResponse","ipAddressData","ipAddress","userAgent","currentDate","formatDate","wrap","_callee$","_context","prev","next","fetch","sent","json","ip","window","navigator","Date","concat","getDate","getMonth","getFullYear","uploadDate","uploadTime","author","name","currentUser","displayName","id","uid","success","t0","console","error","stop","apply","arguments","warning","className","children","position","autoClose","hideProgressBar","placeholder","value","onChange","event","target","cols","rows","onClick"],"sources":["D:/GithubRepo/personalwebsite/Frontend/src/components/CreateBlog.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport BlogController from \"./BlogController\";\r\nimport { addDoc, collection, serverTimestamp } from 'firebase/firestore';\r\nimport { auth, db } from '../firebaseConfig';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport '../styles/bloglogin.css';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\n\r\nexport default function CreateBlog({ isLogin }) {\r\n\r\n    const [title, setTitle] = useState(\"\");\r\n    const [blogContent, setBlogContent] = useState(\"\");\r\n    const postsCollectionRef = collection(db, \"blogs\");\r\n    const navigate = useNavigate();\r\n    const createPost = async () => {\r\n        if (title !== \"\" && blogContent !== \"\") {\r\n            try {\r\n\r\n                // Get IP address\r\n                const ipAddressResponse = await fetch('https://api.ipify.org?format=json');\r\n                const ipAddressData = await ipAddressResponse.json();\r\n                const ipAddress = ipAddressData.ip;\r\n\r\n                // Get device information\r\n                const userAgent = window.navigator.userAgent;\r\n\r\n                const currentDate = new Date();\r\n                const formatDate = `${currentDate.getDate()}/${currentDate.getMonth() + 1}/${currentDate.getFullYear()}`;\r\n                await addDoc(postsCollectionRef, {\r\n                    title,\r\n                    blogContent,\r\n                    uploadDate: formatDate,\r\n                    uploadTime: serverTimestamp(),\r\n                    author: {\r\n                        name: auth.currentUser.displayName,\r\n                        id: auth.currentUser.uid\r\n                    },\r\n                    ipAddress,\r\n                    userAgent\r\n                });\r\n\r\n                // Show a success message to the user\r\n                toast.success(\"Post created successfully\");\r\n\r\n                setTitle(\"\");\r\n                setBlogContent(\"\");\r\n\r\n                // Navigate after success\r\n                navigate('/blogs');\r\n            } catch (error) {\r\n                setTitle(\"\");\r\n                setBlogContent(\"\");\r\n\r\n                console.error(\"Error creating post:\", error);\r\n                toast.error(\"An error occurred while creating post\");\r\n            }\r\n        }\r\n        else {\r\n            toast.error(\"Title or Content can't be empty\")\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!isLogin) {\r\n            navigate(\"/blogs/login\");\r\n            toast.warning(\"Login to create Blog\");\r\n        }\r\n    })\r\n\r\n\r\n    return (\r\n        <div className=\"footer-fix\">\r\n            <ToastContainer position=\"top-right\" autoClose={3000} hideProgressBar={false} />\r\n            <BlogController isLogin={isLogin} />\r\n            <div className=\"createPostPage\">\r\n                <div className=\"cpContainer\">\r\n                    <h1>Create a Blog</h1>\r\n                    <div className=\"inputGp\">\r\n                        <label >Article Title:</label>\r\n                        <input placeholder=\"Title..\" value={title} onChange={(event) => {\r\n                            setTitle(event.target.value);\r\n                        }} />\r\n                    </div>\r\n                    <div className=\"inputGp\">\r\n                        <label>Content:</label>\r\n                        <textarea placeholder=\"Start writing...\" value={blogContent} id=\"\" cols=\"30\" rows=\"10\" onChange={(event) => {\r\n                            setBlogContent(event.target.value);\r\n                        }}></textarea>\r\n                    </div>\r\n                    <button onClick={createPost}>Submit</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}